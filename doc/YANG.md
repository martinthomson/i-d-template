# Working with YANG [RFC7950](https://tools.ietf.org/rfc7950)

In the bad old days, YANG modules were hand-copied into markdown files, but
this became untenable as YANG started getting more usage.

There are 3 YANG features that will be picked up during make, and which
will have enhanced error checking when the VALIDATE_YANG environment
variable is set to 1 or when running `make yanglint`:

 * `YANG-MODULE <ietf-example.yang>`: inserts the text of the .yang file
   before building the markdown.  Usually inside a diagram.  Inserts
   \<CODE BEGINS\> and \<CODE ENDS\> tags in accordance with
   [Section 3.2 of RFC 8407](https://tools.ietf.org/html/rfc8407#section-3.2)

   * when VALIDATE_YANG=1 or during yanglint, also performs a pyang lint check for IETF rules.

 * `YANG-TREE <ietf-example.yang>`: inserts the tree diagram of the .yang
   file (as generated by pyang) before building the markdown, in
   accordance with
   [Section 3.4 of RFC 8407](https://tools.ietf.org/html/rfc8407#section-3.4)

 * `YANG-DATA <ietf-example.yang> <example-data.json>`: inserts the text
   of the .json file before building the markdown.

   * when VALIDATE_YANG=1 or when running `make yanglint`, also performs a yanglint check to ensure that
     the example-data.json validates against the model in ietf-example.yang.
     (yanglint is part of the [libyang](https://github.com/CESNET/libyang)
     project)

Note that the lint checks occur only for YANG modules and examples that
are imported with these commands from files external to the markdown.
If you have YANG examples or modules embedded in the markdown, they are
not examined by this feature.

## Motivation

It's useful to maintain separate YANG module files, because these can be
dropped directly into various tools that make use of them.  By incorporating
the YANG module file into the I-D source markdown by reference instead of by
copy/paste, it becomes easier and more robust to ensure the actual .yang
files and the text of the draft don't accidentally diverge.

Likewise, examples are incredibly useful for understanding how the yang
model is best used, and incredibly easy to diverge in the course of
refactoring the YANG model.

It's hoped that by integrating support for external YANG files, the
quality of drafts that include YANG modules will improve with reduced
effort for authors.
